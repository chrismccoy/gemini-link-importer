jQuery(document).ready((function(e){var i=e("#gemini-link-importer-form"),r=e("#gemini-link-importer-textarea"),n=e("#gemini-link-importer-submit"),t=e("#gemini-link-importer-admin-notices");function s(i,r){t.html('<div class="gemini-link-importer-notice notice-'+i+' is-dismissible">'+r+'<button type="button" class="notice-dismiss"><span class="screen-reader-text">Dismiss this notice.</span></button></div>'),e(".gemini-link-importer-notice .notice-dismiss").on("click",(function(){e(this).closest(".gemini-link-importer-notice").remove()}))}i.on("submit",(function(i){i.preventDefault(),t.empty();var o=r.val().trim();if(o){n.prop("disabled",!0).addClass("is-loading").text(geminiLinkImporterAjax.strings.importing_links);var a={action:"gemini_import_links",nonce:geminiLinkImporterAjax.nonce,links:o};e.ajax({url:geminiLinkImporterAjax.ajaxurl,type:"POST",data:a,dataType:"json",success:function(i){if(r.val(""),i.success){var n=i.data,t=n.imported.length,o=n.failed.length,a=n.new_categories.length,l="",p="info";t>0&&0===o?(l+="<p><strong>"+geminiLinkImporterAjax.strings.overall_success.replace("%d",t)+"</strong></p>",p="success"):t>0&&o>0?(l+="<p><strong>"+geminiLinkImporterAjax.strings.partial_success.replace("%d",t).replace("%d",o).replace("%d",a)+"</strong></p>",p="warning"):0===t&&o>0&&n.total_processed>0?(l+="<p><strong>"+geminiLinkImporterAjax.strings.overall_failure.replace("%d",o)+"</strong></p>",p="error"):0===n.total_processed&&(l+="<p><strong>"+geminiLinkImporterAjax.strings.no_valid_links+"</strong></p>",p="info"),t>0&&(l+="<h3>"+geminiLinkImporterAjax.strings.successfully_added.replace("%d",t)+"</h3>",l+="<ul>",e.each(n.imported,(function(e,i){l+="<li>"+i+"</li>"})),l+="</ul>"),o>0&&(l+="<h3>"+geminiLinkImporterAjax.strings.failed_to_add.replace("%d",o)+"</h3>",l+="<ul>",e.each(n.failed,(function(e,i){l+="<li>"+i.url+" - "+i.reason+"</li>"})),l+="</ul>"),a>0&&(l+="<h3>"+geminiLinkImporterAjax.strings.new_categories.replace("%d",a)+"</h3>",l+="<ul>",e.each(n.new_categories,(function(e,i){l+="<li>"+i+"</li>"})),l+="</ul>"),s(p,l)}else s("error","<p><strong>"+(geminiLinkImporterAjax.strings.message||"An unknown error occurred on the server.")+"</strong></p>")},error:function(e,i,r){s("error","<p><strong>"+geminiLinkImporterAjax.strings.overall_failure.replace("%d",0)+"</strong></p><p>An unexpected error occurred during the request. Please try again or check the browser console for details.</p>")},complete:function(){n.prop("disabled",!1).removeClass("is-loading").text(geminiLinkImporterAjax.strings.import_links)}})}else s("info","<p>"+geminiLinkImporterAjax.strings.empty_textarea+"</p>")}))}));